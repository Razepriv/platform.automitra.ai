# =============================================================================
# MEGNA VOICE - AI VOICE AGENT PLATFORM
# Environment Variables Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# SUPABASE CONFIGURATION (REQUIRED)
# Authentication and Database
# -----------------------------------------------------------------------------
# Get these from: https://app.supabase.com/project/_/settings/api
SUPABASE_URL=https://sdtycpnutctbgbvpbeor.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNkdHljcG51dGN0YmdidnBiZW9yIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MzQ1MTM4NywiZXhwIjoyMDc5MDI3Mzg3fQ.sNoo2CPNcX3qOmK4vOhHR3yIRqofkh921djb_pGD_dY
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNkdHljcG51dGN0YmdidnBiZW9yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0NTEzODcsImV4cCI6MjA3OTAyNzM4N30.YdFTCA9fHkHxeyPPJumiKWH6qpdyJmL-92O3e34Y0RA

# -----------------------------------------------------------------------------
# DATABASE (REQUIRED)
# PostgreSQL Database URL
# -----------------------------------------------------------------------------
# Format: postgresql://user:password@host:port/database
# Get from: Supabase > Project Settings > Database > Connection String
DATABASE_URL="postgresql://postgres.sdtycpnutctbgbvpbeor:Megnavoice123@aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres"

# -----------------------------------------------------------------------------
# SESSION SECRET (REQUIRED)
# Used for encrypting session data
# -----------------------------------------------------------------------------
# Generate a random string: openssl rand -base64 32
SESSION_SECRET=2vf453412!!@323x

# -----------------------------------------------------------------------------
# BOLNA AI API (REQUIRED)
# Voice Agent Orchestration Platform
# -----------------------------------------------------------------------------
# Get your API key from: https://bolna.ai
BOLNA_API_KEY=bn-a4283a69b86d404d81fd1af434c1cabe

# -----------------------------------------------------------------------------
# EXOTEL API (REQUIRED)
# Telephony & SMS Service Provider
# -----------------------------------------------------------------------------
# Get these from: https://my.exotel.com/settings/site#api-credentials
EXOTEL_API_KEY=e4743d0ec0ccd0b6539616d640491e8e19501762b0c6ede2
EXOTEL_API_SECRET=88be57091f060d82edd549ee98315bcd1a44a91b8eb5813e
EXOTEL_SID=arabiangulfpetrochem1
# Exotel Domain (e.g., api.exotel.com or api-in.exotel.in)
EXOTEL_DOMAIN=api.exotel.com
# Your Exotel phone number (the one you want to use for calls)
EXOTEL_PHONE_NUMBER=+919876543210
# Exotel App ID for outbound calls (get from Exotel dashboard)
EXOTEL_OUTBOUND_APP_ID=your_app_id_here

# -----------------------------------------------------------------------------
# WEBHOOK URL (REQUIRED FOR PRODUCTION)
# Public URL for receiving webhooks from Bolna and Exotel
# -----------------------------------------------------------------------------
# For development: Use ngrok or similar tunneling service
# Example: https://abc123.ngrok.io
# For production: Your actual domain
# Example: https://api.yourdomain.com
PUBLIC_WEBHOOK_URL=https://your-ngrok-or-domain.example.com

# -----------------------------------------------------------------------------
# OPENAI API (OPTIONAL)
# Used for AI-powered call summaries and lead qualification analysis
# -----------------------------------------------------------------------------
# Get your API key from: https://platform.openai.com/api-keys
# If not set, AI features will be disabled (app will still work)
OPENAI_API_KEY=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

# -----------------------------------------------------------------------------
# SERVER PORT (OPTIONAL)
# Default: 5000
# -----------------------------------------------------------------------------
PORT=5000

# -----------------------------------------------------------------------------
# DEVELOPMENT / TESTING ONLY
# Basic Authentication (bypass Supabase auth for testing)
# -----------------------------------------------------------------------------
# NEVER use in production!
# BASIC_AUTH_ENABLED=true
# BASIC_AUTH_USERNAME=admin
# BASIC_AUTH_PASSWORD=password123

# =============================================================================
# SETUP CHECKLIST
# =============================================================================
#
# 1. ✅ Create Supabase Project
#    - Go to https://supabase.com
#    - Create new project
#    - Copy SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY, SUPABASE_ANON_KEY
#    - Copy DATABASE_URL from Project Settings > Database
#
# 2. ✅ Setup Bolna AI
#    - Sign up at https://bolna.ai
#    - Get your API key from dashboard
#    - Set BOLNA_API_KEY
#
# 3. ✅ Setup Exotel
#    - Sign up at https://exotel.com
#    - Get API credentials from Settings > API Credentials
#    - Set EXOTEL_API_KEY, EXOTEL_API_SECRET, EXOTEL_SID
#
# 4. ✅ Configure Webhooks
#    - For local development: Install ngrok (https://ngrok.com)
#    - Run: ngrok http 5000
#    - Copy the HTTPS URL to PUBLIC_WEBHOOK_URL
#    - For production: Use your actual domain
#
# 5. ⚠️ Optional: OpenAI Integration
#    - Get API key from https://platform.openai.com
#    - Set OPENAI_API_KEY for AI-powered summaries
#
# 6. ✅ Generate Session Secret
#    - Run: openssl rand -base64 32
#    - Set SESSION_SECRET
#
# 7. ✅ Run Database Migrations
#    - npm run db:push
#
# 8. ✅ Start the Application
#    - npm run dev
#
# =============================================================================
# WEBHOOK ENDPOINTS
# =============================================================================
# After setting PUBLIC_WEBHOOK_URL, configure these webhooks:
#
# Bolna Webhooks:
# - Call Status: {PUBLIC_WEBHOOK_URL}/api/webhooks/bolna/call-status
#
# Exotel Webhooks:
# - Call Status: {PUBLIC_WEBHOOK_URL}/api/webhooks/exotel/call-status
# - Recording Status: {PUBLIC_WEBHOOK_URL}/api/webhooks/exotel/call-status
#
# =============================================================================
# TROUBLESHOOTING
# =============================================================================
#
# Problem: "Bolna API is not configured"
# Solution: Check that BOLNA_API_KEY is set correctly
#
# Problem: "Exotel API is not configured"
# Solution: Ensure all three Exotel variables are set (API_KEY, API_SECRET, SID)
#
# Problem: "Failed to connect to database"
# Solution: Verify DATABASE_URL format and credentials
#
# Problem: Webhooks not receiving calls
# Solution: Ensure PUBLIC_WEBHOOK_URL is publicly accessible (test with curl)
#
# Problem: OpenAI features not working
# Solution: Add OPENAI_API_KEY (optional feature)
#
# =============================================================================
